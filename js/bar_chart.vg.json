{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 600,
  "height": 450,
  "data": {
    "url": "https://raw.githubusercontent.com/rcra0006/homeworkweek9/refs/heads/main/data/speciesdata.csv"
  },

  "hconcat": [
    {
      "layer": [{
      "params": [{"name": "pts", "select": "interval"}],
      "transform": [{"filter": "datum.IUCNStatus != ''"}],
      "mark": "bar",
      "encoding": {
        "y": {"field": "State"},
        "x": {
          "aggregate": "count",
          "field": "State",
          "title": "Number of At Risk Species (catalogued)"
        },
        "color": {
          "field": "IUCNStatus",
          "type": "nominal",
          "title": "IUCN Status",
          "scale": {"scheme": "greens"},
          "sort": [
            "Least Concern",
            "Vulnerable",
            "Near Threatened",
            "Endangered",
            "Critically Endangered"
          ]
        }
      }
      },
      { 
      "data": {"url": "https://raw.githubusercontent.com/rcra0006/homeworkweek9/refs/heads/main/data/speciesdata.csv"},
      "mark": "rule",
      "encoding": {
      "x": {"value": 100},
      "x2": {"value": 220},
      "y": {"value": 100},
      "y2": {"value": 170}
      }
      },
      { 
        "data": {"url": "https://raw.githubusercontent.com/rcra0006/homeworkweek9/refs/heads/main/data/speciesdata.csv"},
        "mark": "text",
        "encoding": {
          "text": {"value": "Drag cursor vertically to select."},
        "x": {"value": 200},
        "y": {"value": 170}
        }
      }]
    },
    {
      "transform": [
        {"filter": "datum.IUCNStatus != ''"},
        {"filter": {"selection": "pts"}}
      ],
      "mark": {"type": "bar", "tooltip": {"content": "TaxonomicGroup"}},
      "encoding": {
        "y": {"field": "Class"},
        "x": {
          "aggregate": "count",
          "field": "Class",
          "title": "Number of At Risk Species (catalogued)"
        },
        "color": {
          "field": "Class",
          "type": "nominal",
          "title": "Status",
          "scale": {"scheme": "blues"}
        }
      }
    }
  ],
  "resolve": {"scale": {"color": "independent"}}
}